"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6457],{25461:(s,n,e)=>{e.r(n),e.d(n,{data:()=>a});const a={key:"v-87f21adc",path:"/vuepress-next/reference/plugin/pwa.html",title:"pwa",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"Install",slug:"install",children:[]},{level:2,title:"Web App Manifests",slug:"web-app-manifests",children:[]},{level:2,title:"Options",slug:"options",children:[{level:3,title:"serviceWorkerFilename",slug:"serviceworkerfilename",children:[]}]},{level:2,title:"Composition API",slug:"composition-api",children:[{level:3,title:"usePwaEvent",slug:"usepwaevent",children:[]},{level:3,title:"useSkipWaiting",slug:"useskipwaiting",children:[]}]}],git:{updatedTime:1635758933e3,contributors:[{name:"shentuzhigang",email:"shentuzhigang@moresec.cn",commits:1}]},readingTime:{minutes:2.02,words:605},filePathRelative:"vuepress-next/reference/plugin/pwa.md",content:'# pwa\n\n<NpmBadge package="@vuepress/plugin-pwa" />\n\nMake your VuePress site a [Progressive Web Application (PWA)](https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps).\n\nThis plugin uses [workbox-build](https://developers.google.com/web/tools/workbox/modules/workbox-build) to generate service worker file, and uses [register-service-worker](https://github.com/yyx990803/register-service-worker) to register service worker.\n\n## Install\n\n```bash\nnpm i -D @vuepress/plugin-pwa@next\n```\n\n## Web App Manifests\n\nTo make your website fully compliant with PWA, you need to create a [Web app manifests](https://developer.mozilla.org/en-US/docs/Web/Manifest) file and set the icons, colors, etc. for your PWA.\n\nYou need to put your manifest file and icons into the [public files directory](../../guide/assets.md#public-files). In the following example, we assume that you are using the default public directory `.vuepress/public`.\n\n1. Create manifest file\n\nTypically `.vuepress/public/manifest.webmanifest`:\n\n```json\n{\n  "name": "VuePress",\n  "short_name": "VuePress",\n  "description": "Vue-powered Static Site Generator",\n  "start_url": "/index.html",\n  "display": "standalone",\n  "background_color": "#fff",\n  "theme_color": "#3eaf7c",\n  "icons": [\n    {\n      "src": "/images/icons/android-chrome-192x192.png",\n      "sizes": "192x192",\n      "type": "image/png"\n    },\n    {\n      "src": "/images/icons/android-chrome-384x384.png",\n      "sizes": "384x384",\n      "type": "image/png"\n    }\n  ]\n}\n```\n\n2. Generate PWA icons\n\nTo make your PWA more accessible, you need to generate some icons, and put them inside the public directory.\n\nMake sure the path of icons matches the `icons` field in your manifest file:\n\n- `.vuepress/public/images/icons/android-chrome-192x192.png`\n- `.vuepress/public/images/icons/android-chrome-384x384.png`\n\n::: tip\nSome tools can help to do that. For example, [Favicon Generator](https://realfavicongenerator.net/) would help you to generate icons together with a sample manifest file.\n:::\n\n3. Set tags in head\n\nYou also need to set some tags via [head](../config.md#head) option to [deploy the manifest](https://developer.mozilla.org/en-US/docs/Web/Manifest#deploying_a_manifest_with_the_link_tag):\n\n```js\nmodule.exports = {\n  head: [\n    [\'link\', { rel: \'manifest\', href: \'/manifest.webmanifest\' }],\n    [\'meta\', { name: \'theme-color\', content: \'#3eaf7c\' }],\n    // ...other tags\n  ]\n}\n```\n\n## Options\n\nThis plugin accepts all parameters of workbox-build\'s [generateSW method](https://developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-build#.generateSW) in its options, except `globDirectory` and `swDest`.\n\nFor example, you can set `skipWaiting: true` to auto activate the new service worker once it is ready:\n\n```js\nmodule.exports = {\n  plugins: [\n    [\n      \'@vuepress/pwa\',\n      {\n        skipWaiting: true,\n      },\n    ],\n  ],\n}\n```\n\nBut if you omit `skipWaiting` or set it to `false`, you have to activate the new service worker manually:\n\n- For users, you can use our [pwa-popup](./pwa-popup.md) plugin together.\n- For developers, you can use our [composition API](#composition-api) to take control of the service worker behavior.\n\n### serviceWorkerFilename\n\n- Type: `string`\n\n- Default: `\'service-worker.js\'`\n\n- Details:\n\n  File path of the generated service worker file, which is relative to the [dest](../config.md#dest) directory.\n\n  The service worker file will only be generated in `build` mode.\n\n## Composition API\n\n### usePwaEvent\n\n- Details:\n\n  Returns the event emitter of this plugin.\n  \n  You can add listener function to events that provided by [register-service-worker](https://github.com/yyx990803/register-service-worker).\n\n- Example:\n\n```ts\nimport { usePwaEvent } from \'@vuepress/plugin-pwa/lib/client\'\n\nexport default {\n  setup() {\n    const event = usePwaEvent()\n    event.on(\'ready\', (registration) => {\n      console.log(\'Service worker is active.\')\n    })\n  },\n}\n```\n\n### useSkipWaiting\n\n- Parameters:\n\n|  Parameter   | Type                        | Description                                              |\n| ------------ | --------------------------- | -------------------------------------------------------- |\n| registration | `ServiceWorkerRegistration` | The registration of the service worker you want activate |\n\n- Details:\n\n  Call [skipWaiting()](https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerGlobalScope/skipWaiting) to activate the waiting service worker.\n\n- Example:\n\n```ts\nimport {\n  usePwaEvent,\n  useSkipWaiting,\n} from \'@vuepress/plugin-pwa/lib/client\'\n\nexport default {\n  setup() {\n    const event = usePwaEvent()\n    event.on(\'updated\', (registration) => {\n      console.log(\'The waiting service worker is available.\')\n      // activate the waiting service worker\n      useSkipWaiting(registration)\n    })\n  },\n}\n```\n'}},33716:(s,n,e)=>{e.r(n),e.d(n,{default:()=>S});var a=e(66252);const l=(0,a._)("h1",{id:"pwa",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#pwa","aria-hidden":"true"},"#"),(0,a.Uk)(" pwa")],-1),o=(0,a.uE)('<p>Make your VuePress site a <a href="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps" target="_blank" rel="noopener noreferrer">Progressive Web Application (PWA)</a>.</p><p>This plugin uses <a href="https://developers.google.com/web/tools/workbox/modules/workbox-build" target="_blank" rel="noopener noreferrer">workbox-build</a> to generate service worker file, and uses <a href="https://github.com/yyx990803/register-service-worker" target="_blank" rel="noopener noreferrer">register-service-worker</a> to register service worker.</p><h2 id="install" tabindex="-1"><a class="header-anchor" href="#install" aria-hidden="true">#</a> Install</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">npm i -D @vuepress/plugin-pwa@next</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="web-app-manifests" tabindex="-1"><a class="header-anchor" href="#web-app-manifests" aria-hidden="true">#</a> Web App Manifests</h2><p>To make your website fully compliant with PWA, you need to create a <a href="https://developer.mozilla.org/en-US/docs/Web/Manifest" target="_blank" rel="noopener noreferrer">Web app manifests</a> file and set the icons, colors, etc. for your PWA.</p>',6),p=(0,a.Uk)("You need to put your manifest file and icons into the "),r=(0,a.Uk)("public files directory"),t=(0,a.Uk)(". In the following example, we assume that you are using the default public directory "),i=(0,a._)("code",null,".vuepress/public",-1),c=(0,a.Uk)("."),D=(0,a.uE)('<ol><li>Create manifest file</li></ol><p>Typically <code>.vuepress/public/manifest.webmanifest</code>:</p><div class="language-json ext-json line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">{</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;name&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;VuePress&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;short_name&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;VuePress&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;description&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;Vue-powered Static Site Generator&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;start_url&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;/index.html&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;display&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;standalone&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;background_color&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;#fff&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;theme_color&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;#3eaf7c&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;icons&quot;</span><span style="color:#D4D4D4;">: [</span></span>\n<span class="line"><span style="color:#D4D4D4;">    {</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;src&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;/images/icons/android-chrome-192x192.png&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;sizes&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;192x192&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;type&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;image/png&quot;</span></span>\n<span class="line"><span style="color:#D4D4D4;">    },</span></span>\n<span class="line"><span style="color:#D4D4D4;">    {</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;src&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;/images/icons/android-chrome-384x384.png&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;sizes&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;384x384&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;type&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;image/png&quot;</span></span>\n<span class="line"><span style="color:#D4D4D4;">    }</span></span>\n<span class="line"><span style="color:#D4D4D4;">  ]</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ol start="2"><li>Generate PWA icons</li></ol><p>To make your PWA more accessible, you need to generate some icons, and put them inside the public directory.</p><p>Make sure the path of icons matches the <code>icons</code> field in your manifest file:</p><ul><li><code>.vuepress/public/images/icons/android-chrome-192x192.png</code></li><li><code>.vuepress/public/images/icons/android-chrome-384x384.png</code></li></ul><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Some tools can help to do that. For example, <a href="https://realfavicongenerator.net/" target="_blank" rel="noopener noreferrer">Favicon Generator</a> would help you to generate icons together with a sample manifest file.</p></div><ol start="3"><li>Set tags in head</li></ol>',9),u=(0,a.Uk)("You also need to set some tags via "),y=(0,a.Uk)("head"),d=(0,a.Uk)(" option to "),m=(0,a._)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/Manifest#deploying_a_manifest_with_the_link_tag",target:"_blank",rel:"noopener noreferrer"},"deploy the manifest",-1),b=(0,a.Uk)(":"),h=(0,a.uE)('<div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#4EC9B0;">module</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">exports</span><span style="color:#D4D4D4;"> = {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">head:</span><span style="color:#D4D4D4;"> [</span></span>\n<span class="line"><span style="color:#D4D4D4;">    [</span><span style="color:#CE9178;">&#39;link&#39;</span><span style="color:#D4D4D4;">, { </span><span style="color:#9CDCFE;">rel:</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;manifest&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">href:</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;/manifest.webmanifest&#39;</span><span style="color:#D4D4D4;"> }],</span></span>\n<span class="line"><span style="color:#D4D4D4;">    [</span><span style="color:#CE9178;">&#39;meta&#39;</span><span style="color:#D4D4D4;">, { </span><span style="color:#9CDCFE;">name:</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;theme-color&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">content:</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;#3eaf7c&#39;</span><span style="color:#D4D4D4;"> }],</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// ...other tags</span></span>\n<span class="line"><span style="color:#D4D4D4;">  ]</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="options" tabindex="-1"><a class="header-anchor" href="#options" aria-hidden="true">#</a> Options</h2><p>This plugin accepts all parameters of workbox-build&#39;s <a href="https://developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-build#.generateSW" target="_blank" rel="noopener noreferrer">generateSW method</a> in its options, except <code>globDirectory</code> and <code>swDest</code>.</p><p>For example, you can set <code>skipWaiting: true</code> to auto activate the new service worker once it is ready:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#4EC9B0;">module</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">exports</span><span style="color:#D4D4D4;"> = {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">plugins:</span><span style="color:#D4D4D4;"> [</span></span>\n<span class="line"><span style="color:#D4D4D4;">    [</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#CE9178;">&#39;@vuepress/pwa&#39;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">      {</span></span>\n<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">skipWaiting:</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">      },</span></span>\n<span class="line"><span style="color:#D4D4D4;">    ],</span></span>\n<span class="line"><span style="color:#D4D4D4;">  ],</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>But if you omit <code>skipWaiting</code> or set it to <code>false</code>, you have to activate the new service worker manually:</p>',6),g=(0,a.Uk)("For users, you can use our "),v=(0,a.Uk)("pwa-popup"),f=(0,a.Uk)(" plugin together."),k=(0,a._)("li",null,[(0,a.Uk)("For developers, you can use our "),(0,a._)("a",{href:"#composition-api"},"composition API"),(0,a.Uk)(" to take control of the service worker behavior.")],-1),w=(0,a._)("h3",{id:"serviceworkerfilename",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#serviceworkerfilename","aria-hidden":"true"},"#"),(0,a.Uk)(" serviceWorkerFilename")],-1),C=(0,a._)("li",null,[(0,a._)("p",null,[(0,a.Uk)("Type: "),(0,a._)("code",null,"string")])],-1),E=(0,a._)("li",null,[(0,a._)("p",null,[(0,a.Uk)("Default: "),(0,a._)("code",null,"'service-worker.js'")])],-1),x=(0,a._)("p",null,"Details:",-1),_=(0,a.Uk)("File path of the generated service worker file, which is relative to the "),W=(0,a.Uk)("dest"),q=(0,a.Uk)(" directory."),F=(0,a._)("p",null,[(0,a.Uk)("The service worker file will only be generated in "),(0,a._)("code",null,"build"),(0,a.Uk)(" mode.")],-1),P=(0,a.uE)('<h2 id="composition-api" tabindex="-1"><a class="header-anchor" href="#composition-api" aria-hidden="true">#</a> Composition API</h2><h3 id="usepwaevent" tabindex="-1"><a class="header-anchor" href="#usepwaevent" aria-hidden="true">#</a> usePwaEvent</h3><ul><li><p>Details:</p><p>Returns the event emitter of this plugin.</p><p>You can add listener function to events that provided by <a href="https://github.com/yyx990803/register-service-worker" target="_blank" rel="noopener noreferrer">register-service-worker</a>.</p></li><li><p>Example:</p></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">usePwaEvent</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;@vuepress/plugin-pwa/lib/client&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#C586C0;">export</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">default</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#DCDCAA;">setup</span><span style="color:#D4D4D4;">() {</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">event</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">usePwaEvent</span><span style="color:#D4D4D4;">()</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">event</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">on</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;ready&#39;</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">registration</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">console</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">log</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;Service worker is active.&#39;</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">    })</span></span>\n<span class="line"><span style="color:#D4D4D4;">  },</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="useskipwaiting" tabindex="-1"><a class="header-anchor" href="#useskipwaiting" aria-hidden="true">#</a> useSkipWaiting</h3><ul><li>Parameters:</li></ul><table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>registration</td><td><code>ServiceWorkerRegistration</code></td><td>The registration of the service worker you want activate</td></tr></tbody></table><ul><li><p>Details:</p><p>Call <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerGlobalScope/skipWaiting" target="_blank" rel="noopener noreferrer">skipWaiting()</a> to activate the waiting service worker.</p></li><li><p>Example:</p></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">usePwaEvent</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">useSkipWaiting</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">} </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;@vuepress/plugin-pwa/lib/client&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#C586C0;">export</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">default</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#DCDCAA;">setup</span><span style="color:#D4D4D4;">() {</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">event</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">usePwaEvent</span><span style="color:#D4D4D4;">()</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">event</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">on</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;updated&#39;</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">registration</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">console</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">log</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;The waiting service worker is available.&#39;</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#6A9955;">// activate the waiting service worker</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#DCDCAA;">useSkipWaiting</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">registration</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">    })</span></span>\n<span class="line"><span style="color:#D4D4D4;">  },</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div>',9),A={},S=(0,e(83744).Z)(A,[["render",function(s,n){const e=(0,a.up)("NpmBadge"),A=(0,a.up)("RouterLink");return(0,a.wg)(),(0,a.iD)(a.HY,null,[l,(0,a.Wm)(e,{package:"@vuepress/plugin-pwa"}),o,(0,a._)("p",null,[p,(0,a.Wm)(A,{to:"/vuepress-next/guide/assets.html#public-files"},{default:(0,a.w5)((()=>[r])),_:1}),t,i,c]),D,(0,a._)("p",null,[u,(0,a.Wm)(A,{to:"/vuepress-next/reference/config.html#head"},{default:(0,a.w5)((()=>[y])),_:1}),d,m,b]),h,(0,a._)("ul",null,[(0,a._)("li",null,[g,(0,a.Wm)(A,{to:"/vuepress-next/reference/plugin/pwa-popup.html"},{default:(0,a.w5)((()=>[v])),_:1}),f]),k]),w,(0,a._)("ul",null,[C,E,(0,a._)("li",null,[x,(0,a._)("p",null,[_,(0,a.Wm)(A,{to:"/vuepress-next/reference/config.html#dest"},{default:(0,a.w5)((()=>[W])),_:1}),q]),F])]),P],64)}]])}}]);