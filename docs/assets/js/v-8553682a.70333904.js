"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3495],{76194:(n,e,s)=>{s.r(e),s.d(e,{data:()=>a});const a={key:"v-8553682a",path:"/zh/vuepress-next/reference/plugin/git.html",title:"git",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"安装",slug:"安装",children:[]},{level:2,title:"Git 仓库",slug:"git-仓库",children:[]},{level:2,title:"配置项",slug:"配置项",children:[{level:3,title:"createdTime",slug:"createdtime",children:[]},{level:3,title:"updatedTime",slug:"updatedtime",children:[]},{level:3,title:"contributors",slug:"contributors",children:[]}]},{level:2,title:"页面数据",slug:"页面数据",children:[{level:3,title:"git.createdTime",slug:"git-createdtime",children:[]},{level:3,title:"git.updatedTime",slug:"git-updatedtime",children:[]},{level:3,title:"git.contributors",slug:"git-contributors",children:[]}]}],git:{updatedTime:1635758933e3,contributors:[{name:"shentuzhigang",email:"shentuzhigang@moresec.cn",commits:1}]},readingTime:{minutes:1.64,words:492},filePathRelative:"zh/vuepress-next/reference/plugin/git.md",content:"# git\n\n<NpmBadge package=\"@vuepress/plugin-git\" />\n\n该插件会收集你的页面的 Git 信息，包括创建和更新时间、贡献者等。\n\n默认主题的 [lastUpdated](../default-theme/config.md#lastupdated) 和 [contributors](../default-theme/config.md#contributors) 就是由该插件支持的。\n\n该插件主要用于开发主题，大部分情况下你不需要直接使用它。\n\n## 安装\n\n```bash\nnpm i -D @vuepress/plugin-git@next\n```\n\n## Git 仓库\n\n该插件要求你的项目在 [Git 仓库](https://git-scm.com/book/en/Git-Basics-Getting-a-Git-Repository) 下，这样它才能从提交历史记录中收集信息。\n\n在构建站点时，你应该确保所有的提交记录是可以获取到的。举例来说， CI 工作流通常会在克隆你的仓库时添加 [--depth 1](https://git-scm.com/docs/git-clone#Documentation/git-clone.txt---depthltdepthgt) 参数来避免拉取全部的提交记录，因此你需要禁用这个功能，以便该插件在 CI 可以中正常使用。\n\n::: warning\n该插件会显著降低准备数据的速度，特别是在你的页面数量很多的时候。你可以考虑在 `dev` 模式下禁用该插件来获取更好的开发体验。\n:::\n\n## 配置项\n\n### createdTime\n\n- 类型： `boolean`\n\n- 默认值： `true`\n\n- 详情：\n\n  是否收集页面的创建时间。\n\n### updatedTime\n\n- 类型： `boolean`\n\n- 默认值： `true`\n\n- 详情：\n\n  是否收集页面的更新时间。\n\n### contributors\n\n- 类型： `boolean`\n\n- 默认值： `true`\n\n- 详情：\n\n  是否收集页面的贡献者。\n\n## 页面数据\n\n该插件会向页面数据中添加一个 `git` 字段。\n\n在使用该插件后，可以在页面数据中获取该插件收集到的 Git 信息：\n\n```ts\nimport { usePageData } from '@vuepress/client'\nimport type { GitPluginPageData } from '@vuepress/client'\n\nexport default {\n  setup() {\n    const page = usePageData<GitPluginPageData>()\n    console.log(page.value.git)\n  }\n}\n```\n\n### git.createdTime\n\n- 类型： `number`\n\n- 详情：\n\n  页面第一次提交的 Unix 毫秒时间戳。\n\n### git.updatedTime\n\n- 类型： `number`\n\n- 详情：\n\n  页面最后一次提交的 Unix 毫秒时间戳。\n\n### git.contributors\n\n- 类型： `GitContributor[]`\n\n```ts\ninterface GitContributor {\n  name: string\n  email: string\n  commits: number\n}\n```\n\n- 详情：\n\n  页面的贡献者信息。\n"}},6018:(n,e,s)=>{s.r(e),s.d(e,{default:()=>D});var a=s(66252);const t=(0,a._)("h1",{id:"git",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#git","aria-hidden":"true"},"#"),(0,a.Uk)(" git")],-1),l=(0,a._)("p",null,"该插件会收集你的页面的 Git 信息，包括创建和更新时间、贡献者等。",-1),p=(0,a.Uk)("默认主题的 "),i=(0,a.Uk)("lastUpdated"),r=(0,a.Uk)(" 和 "),o=(0,a.Uk)("contributors"),c=(0,a.Uk)(" 就是由该插件支持的。"),d=(0,a.uE)('<p>该插件主要用于开发主题，大部分情况下你不需要直接使用它。</p><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">npm i -D @vuepress/plugin-git@next</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="git-仓库" tabindex="-1"><a class="header-anchor" href="#git-仓库" aria-hidden="true">#</a> Git 仓库</h2><p>该插件要求你的项目在 <a href="https://git-scm.com/book/en/Git-Basics-Getting-a-Git-Repository" target="_blank" rel="noopener noreferrer">Git 仓库</a> 下，这样它才能从提交历史记录中收集信息。</p><p>在构建站点时，你应该确保所有的提交记录是可以获取到的。举例来说， CI 工作流通常会在克隆你的仓库时添加 <a href="https://git-scm.com/docs/git-clone#Documentation/git-clone.txt---depthltdepthgt" target="_blank" rel="noopener noreferrer">--depth 1</a> 参数来避免拉取全部的提交记录，因此你需要禁用这个功能，以便该插件在 CI 可以中正常使用。</p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>该插件会显著降低准备数据的速度，特别是在你的页面数量很多的时候。你可以考虑在 <code>dev</code> 模式下禁用该插件来获取更好的开发体验。</p></div><h2 id="配置项" tabindex="-1"><a class="header-anchor" href="#配置项" aria-hidden="true">#</a> 配置项</h2><h3 id="createdtime" tabindex="-1"><a class="header-anchor" href="#createdtime" aria-hidden="true">#</a> createdTime</h3><ul><li><p>类型： <code>boolean</code></p></li><li><p>默认值： <code>true</code></p></li><li><p>详情：</p><p>是否收集页面的创建时间。</p></li></ul><h3 id="updatedtime" tabindex="-1"><a class="header-anchor" href="#updatedtime" aria-hidden="true">#</a> updatedTime</h3><ul><li><p>类型： <code>boolean</code></p></li><li><p>默认值： <code>true</code></p></li><li><p>详情：</p><p>是否收集页面的更新时间。</p></li></ul><h3 id="contributors" tabindex="-1"><a class="header-anchor" href="#contributors" aria-hidden="true">#</a> contributors</h3><ul><li><p>类型： <code>boolean</code></p></li><li><p>默认值： <code>true</code></p></li><li><p>详情：</p><p>是否收集页面的贡献者。</p></li></ul><h2 id="页面数据" tabindex="-1"><a class="header-anchor" href="#页面数据" aria-hidden="true">#</a> 页面数据</h2><p>该插件会向页面数据中添加一个 <code>git</code> 字段。</p><p>在使用该插件后，可以在页面数据中获取该插件收集到的 Git 信息：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">usePageData</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;@vuepress/client&#39;</span></span>\n<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">type</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">GitPluginPageData</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;@vuepress/client&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#C586C0;">export</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">default</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#DCDCAA;">setup</span><span style="color:#D4D4D4;">() {</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">page</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">usePageData</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">GitPluginPageData</span><span style="color:#D4D4D4;">&gt;()</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">console</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">log</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">page</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">git</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">  }</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="git-createdtime" tabindex="-1"><a class="header-anchor" href="#git-createdtime" aria-hidden="true">#</a> git.createdTime</h3><ul><li><p>类型： <code>number</code></p></li><li><p>详情：</p><p>页面第一次提交的 Unix 毫秒时间戳。</p></li></ul><h3 id="git-updatedtime" tabindex="-1"><a class="header-anchor" href="#git-updatedtime" aria-hidden="true">#</a> git.updatedTime</h3><ul><li><p>类型： <code>number</code></p></li><li><p>详情：</p><p>页面最后一次提交的 Unix 毫秒时间戳。</p></li></ul><h3 id="git-contributors" tabindex="-1"><a class="header-anchor" href="#git-contributors" aria-hidden="true">#</a> git.contributors</h3><ul><li>类型： <code>GitContributor[]</code></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">interface</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">GitContributor</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">string</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">email</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">string</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">commits</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">number</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p>详情：</p><p>页面的贡献者信息。</p></li></ul>',26),u={},D=(0,s(83744).Z)(u,[["render",function(n,e){const s=(0,a.up)("NpmBadge"),u=(0,a.up)("RouterLink");return(0,a.wg)(),(0,a.iD)(a.HY,null,[t,(0,a.Wm)(s,{package:"@vuepress/plugin-git"}),l,(0,a._)("p",null,[p,(0,a.Wm)(u,{to:"/zh/vuepress-next/reference/default-theme/config.html#lastupdated"},{default:(0,a.w5)((()=>[i])),_:1}),r,(0,a.Wm)(u,{to:"/zh/vuepress-next/reference/default-theme/config.html#contributors"},{default:(0,a.w5)((()=>[o])),_:1}),c]),d],64)}]])}}]);